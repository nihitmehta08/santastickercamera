<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Santa In Your House ðŸŽ…âœ¨</title>

<style>
    body {
        background: #0b1221;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        padding-bottom: 40px;
    }

    h1 {
        margin-top: 20px;
        font-size: 28px;
    }

    .controls {
        margin-top: 20px;
        background: #111a33;
        padding: 20px;
        border-radius: 12px;
        display: inline-block;
    }

    #preview-container {
        margin-top: 25px;
        position: relative;
        display: inline-block;
        max-width: 95%;
    }

    #housePhoto, #santaSticker {
        position: absolute;
        top: 0;
        left: 0;
    }

    #housePhoto {
        width: 100%;
    }

    #santaSticker {
        width: 200px;
        cursor: grab;
    }

    .santa-options img {
        width: 80px;
        padding: 5px;
        cursor: pointer;
        border: 2px solid transparent;
        border-radius: 10px;
    }

    .santa-options img:hover {
        border-color: #ffd700;
    }

    button {
        background: #ffcc00;
        color: black;
        padding: 12px 20px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 15px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>Santa In Your House ðŸŽ…ðŸ“¸</h1>

<div class="controls">
    <h3>1. Upload your house photo:</h3>
    <input type="file" id="uploadInput" accept="image/*" />

    <h3>2. Choose your Santa:</h3>
    <div class="santa-options">
        <img src="santa1.png" onclick="selectSanta('santa1.png')">
        <img src="santa2.png" onclick="selectSanta('santa2.png')">
    </div>

    <h3>Santa Size</h3>
    <input type="range" id="sizeSlider" min="50" max="500" value="200" />
</div>

<div id="preview-container">
    <img id="housePhoto" />
    <img id="santaSticker" draggable="false" />
</div>

<button onclick="downloadFinal()">Download Magic Photo âœ¨</button>

<script>
let santa = document.getElementById("santaSticker");
let house = document.getElementById("housePhoto");
let sizeSlider = document.getElementById("sizeSlider");

// Upload background photo
document.getElementById("uploadInput").addEventListener("change", function(e) {
    let file = e.target.files[0];
    let reader = new FileReader();
    reader.onload = function(event) {
        house.src = event.target.result;
    };
    reader.readAsDataURL(file);
});

// Select Santa
function selectSanta(name) {
    santa.src = name;
}

// Resize Santa
sizeSlider.oninput = function () {
    santa.style.width = this.value + "px";
};

// Drag Santa
let isDown = false;
let offsetX, offsetY;

santa.addEventListener("mousedown", function(e) {
    isDown = true;
    offsetX = e.offsetX;
    offsetY = e.offsetY;
    santa.style.cursor = "grabbing";
});

document.addEventListener("mouseup", function() { isDown = false; santa.style.cursor="grab"; });

document.addEventListener("mousemove", function(e) {
    if (!isDown) return;
    let rect = document.getElementById("preview-container").getBoundingClientRect();
    santa.style.left = (e.clientX - rect.left - offsetX) + "px";
    santa.style.top = (e.clientY - rect.top - offsetY) + "px";
});

// Download final image
function downloadFinal() {
    html2canvas(document.getElementById("preview-container")).then(canvas => {
        let link = document.createElement("a");
        link.download = "SantaMagicPhoto.png";
        link.href = canvas.toDataURL();
        link.click();
    });
}
</script>

<!-- Load html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>
</html>
